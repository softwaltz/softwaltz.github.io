webpackJsonp([1],{ADuR:function(t,i){},NHnr:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("7+uW"),n=e("yviF"),s=e.n(n);e("881v");s.a.initializeApp({databaseURL:"https://cartlist-af7af.firebaseio.com",projectId:"cartlist-af7af"});var r=s.a.firestore(),o={data:function(){return{currid:"",id:"",title:"載入中...",dead_time:"載入中...",sponsor:"載入中...",info_editable:!1,info_editable_btn_text:"編緝資訊",delete_btn_text:"刪除團購",participants:[]}},methods:{edit_info:function(){this.info_editable=!this.info_editable,this.info_editable_btn_text=0==this.info_editable?"編緝資訊":"確定"},delete_cart:function(){"刪除團購"==this.delete_btn_text?this.delete_btn_text="要刪嗎??":(this.title="刪除中...",this.dead_time="刪除中...",this.sponsor="刪除中...",this.delete_btn_text="刪除團購",r.doc("cart/"+this.currid).delete().then(function(){window.location="/"}))},add_participant:function(){this.participants.push({id:"",buyer:"",product:"",quantity:1,participant_editable:!0,participant_editable_btn_text:"新增"})},edit_participant:function(t){this.participants[t].participant_editable=!this.participants[t].participant_editable,this.participants[t].participant_editable_btn_text=0==this.participants[t].participant_editable?"修改":"確定"},update_participant:function(t){var i=this;""==this.participants[t].buyer?this.participants.splice(t):""==this.participants[t].id?r.collection("cart/"+this.currid+"/participants").add({buyer:this.participants[t].buyer,product:this.participants[t].product,quantity:this.participants[t].quantity,timestamp:Date.now()}).then(function(e){i.participants[t].id=e.id,i.participants[t].participant_editable=!i.participants[t].participant_editable,i.participants[t].participant_editable_btn_text=0==i.participants[t].participant_editable?"修改":"確定"}):r.doc("cart/"+this.currid+"/participants/"+this.participants[t].id).update({buyer:this.participants[t].buyer,product:this.participants[t].product,quantity:this.participants[t].quantity}).then(function(){i.participants[t].participant_editable=!i.participants[t].participant_editable,i.participants[t].participant_editable_btn_text=0==i.participants[t].participant_editable?"修改":"確定"})},delete_participant:function(t){var i=this;r.doc("cart/"+this.currid+"/participants/"+this.participants[t].id).delete().then(function(){i.participants.splice(t,1)})}},mounted:function(){var t=this;this.currid=this.$route.params.id,r.doc("cart/"+this.currid).get().then(function(i){var e=i.data();t.id=i.id,t.title=e.title,t.dead_time=e.dead_time,t.sponsor=e.sponsor,r.collection("cart/"+t.currid+"/participants").orderBy("timestamp").get().then(function(i){i.forEach(function(i){var e=i.data(),a={id:i.id,buyer:e.buyer,product:e.product,quantity:e.quantity,participant_editable:!1,participant_editable_btn_text:"修改",delete_btn_text:"刪除團購"};t.participants.push(a)})})})}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"cartlist"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.info_editable,expression:"!info_editable"}],staticClass:"cart_title"},[t._v(t._s(t.title))]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.info_editable,expression:"info_editable"}],staticClass:"cart_title"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"cart_title",domProps:{value:t.title},on:{input:function(i){i.target.composing||(t.title=i.target.value)}}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.info_editable,expression:"!info_editable"}],staticClass:"cart_info"},[e("div",{staticClass:"cart_dead_time"},[t._v("截止: "+t._s(t.dead_time))]),t._v(" "),e("div",{staticClass:"cart_sponsor"},[t._v("Sponsor: "+t._s(t.sponsor))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.info_editable,expression:"info_editable"}],staticClass:"cart_info"},[e("div",{staticClass:"cart_dead_time"},[t._v("截止: "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dead_time,expression:"dead_time"}],domProps:{value:t.dead_time},on:{input:function(i){i.target.composing||(t.dead_time=i.target.value)}}})]),t._v(" "),e("div",{staticClass:"cart_sponsor"},[t._v("Sponsor: "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.sponsor,expression:"sponsor"}],domProps:{value:t.sponsor},on:{input:function(i){i.target.composing||(t.sponsor=i.target.value)}}})])]),t._v(" "),e("div",[e("button",{on:{click:t.edit_info}},[t._v(t._s(t.info_editable_btn_text))]),t._v(" "),e("button",{on:{click:t.delete_cart}},[t._v(t._s(t.delete_btn_text))])]),t._v(" "),e("div",{staticClass:"cart_participants"},t._l(t.participants,function(i,a){return e("div",{key:a,staticClass:"cart_participant"},[e("div",{directives:[{name:"show",rawName:"v-show",value:i.participant_editable,expression:"p.participant_editable"}]},[e("div",[t._v("\n                    參團人: "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.buyer,expression:"p.buyer"}],domProps:{value:i.buyer},on:{input:function(e){e.target.composing||t.$set(i,"buyer",e.target.value)}}})]),t._v(" "),e("div",[t._v("\n                    團購品: "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.product,expression:"p.product"}],domProps:{value:i.product},on:{input:function(e){e.target.composing||t.$set(i,"product",e.target.value)}}})]),t._v(" "),e("div",[t._v("\n                    數　量: "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.quantity,expression:"p.quantity"}],domProps:{value:i.quantity},on:{input:function(e){e.target.composing||t.$set(i,"quantity",e.target.value)}}})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!i.participant_editable,expression:"!p.participant_editable"}]},[t._v("\n                "+t._s(i.buyer)+":  "+t._s(i.product)+" x "+t._s(i.quantity)+"\n            ")]),t._v(" "),e("div",{staticClass:"cart_participant_func"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!i.participant_editable,expression:"!p.participant_editable"}],on:{click:function(i){return t.edit_participant(a)}}},[t._v("修改")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:i.participant_editable,expression:"p.participant_editable"}],on:{click:function(i){return t.update_participant(a)}}},[t._v(t._s(i.participant_editable_btn_text))]),t._v(" "),e("button",{on:{click:function(i){return t.delete_participant(a)}}},[t._v("刪除")])])])}),0),t._v(" "),e("button",{on:{click:t.add_participant}},[t._v("新增團員")])])},staticRenderFns:[]};var c=e("VU/8")(o,d,!1,function(t){e("ADuR")},"data-v-0e24b5bd",null).exports,p={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]};var l=e("VU/8")({name:"App"},p,!1,function(t){e("fPFU")},null,null).exports,_=e("/ocq"),u={data:function(){return{title:"所有團購",list:[]}},methods:{add_cart:function(){this.list.push({id:"",title:"",dead_time:"",sponsor:"",info_editable:!0,info_editable_btn_text:"確定"})},edit_cart:function(t){this.list[t].info_editable=!this.list[t].info_editable,this.list[t].info_editable_btn_text=0==this.list[t].info_editable?"修改":"確定"},update_cart:function(t){var i=this;""==this.list[t].title?this.list.splice(t):""==this.list[t].id?r.collection("cart/").add({title:this.list[t].title,dead_time:this.list[t].dead_time,sponsor:this.list[t].sponsor,timestamp:Date.now()}).then(function(e){i.list[t].id=e.id,i.list[t].info_editable=!i.list[t].info_editable,i.list[t].info_editable_btn_text=0==i.list[t].info_editable?"修改":"確定"}):r.doc("cart/"+this.list[t].id).update({title:this.list[t].title,dead_time:this.list[t].dead_time,sponsor:this.list[t].sponsor}).then(function(){i.list[t].info_editable=!i.list[t].info_editable,i.list[t].info_editable_btn_text=0==i.list[t].info_editable?"修改":"確定"})}},mounted:function(){var t=this,i=r.collection("cart/").orderBy("timestamp","desc");console.log(i),i.get().then(function(i){i.forEach(function(i){var e=i.data(),a={id:i.id,title:e.title,dead_time:e.dead_time,sponsor:e.sponsor,info_editable:!1,info_editable_btn_text:"確定"};t.list.push(a)})})}},v={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"manual"}},[e("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticClass:"cart_list"},t._l(t.list,function(i,a){return e("div",{key:a,staticClass:"cart"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!i.info_editable,expression:"!l.info_editable"}]},[e("router-link",{attrs:{to:{path:"/cart/"+i.id}}},[t._v(t._s(i.title))]),t._v(" "),e("div",{staticClass:"cart_dead_time"},[e("div",[t._v("\n                        截止: "+t._s(i.dead_time)+"\n                    ")]),t._v(" "),e("div",[t._v("\n                        Sponsor: "+t._s(i.sponsor)+"\n                    ")])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:i.info_editable,expression:"l.info_editable"}]},[e("div",[t._v("團　名: "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.title,expression:"l.title"}],staticClass:"cart_title",domProps:{value:i.title},on:{input:function(e){e.target.composing||t.$set(i,"title",e.target.value)}}})]),t._v(" "),e("div",[t._v("截　止: "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.dead_time,expression:"l.dead_time"}],domProps:{value:i.dead_time},on:{input:function(e){e.target.composing||t.$set(i,"dead_time",e.target.value)}}})]),t._v(" "),e("div",[t._v("發起人: "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.sponsor,expression:"l.sponsor"}],domProps:{value:i.sponsor},on:{input:function(e){e.target.composing||t.$set(i,"sponsor",e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"cart_func"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!i.info_editable,expression:"!l.info_editable"}],on:{click:function(i){return t.edit_cart(a)}}},[t._v("修改")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:i.info_editable,expression:"l.info_editable"}],on:{click:function(i){return t.update_cart(a)}}},[t._v(t._s(i.info_editable_btn_text))])])])}),0),t._v(" "),e("div",{staticClass:"cart_func"},[e("button",{on:{click:t.add_cart}},[t._v("開新團")])])])},staticRenderFns:[]};var m=e("VU/8")(u,v,!1,function(t){e("puRo")},"data-v-e13f0422",null).exports;a.a.use(_.a);var b=new _.a({routes:[{path:"/",name:"manual",component:m},{path:"/cart/:id",name:"Cart",component:c}]}),f=e("hnaQ");a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:l},router:b,template:"<App/>"}),a.a.use(f.a)},fPFU:function(t,i){},puRo:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.e71069d73ece60747de7.js.map